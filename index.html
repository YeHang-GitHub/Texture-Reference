<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texture Reference</title>
    <link rel="icon" href="assets/images/logo.png" type="image/png">
    <style>
        /* Body ËÆæÁΩÆÂõ∫ÂÆöÈ´òÂ∫¶Ôºå‰∏çÊªöÂä®ÔºåÊªöÂä®Êù°Áî±ÂÜÖÈÉ®Âå∫ÂüüÊéßÂà∂ */
        body {
            display: flex;
            flex-direction: column;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1f1f1f 100%);
            color: white;
            height: 100vh;
            margin: 0;
            overflow: hidden; /* Èò≤Ê≠¢È°µÈù¢Êï¥‰ΩìÊªöÂä® */
        }
        /* È°∂ÈÉ®Ê†è - Ê∂≤ÊÄÅÁéªÁíÉÊïàÊûú */
        #topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0 20px 0 13px;
            height: 50px;
            flex-shrink: 0;
            z-index: 100;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        #header {
            font-size: 1.5em;
            margin-top: 5px; /* Move title down by 5px */
        }
        #slider-container {
            display: flex;
            align-items: center;
            position: relative;
            z-index: 101; /* Ensure slider container is above canvas */
        }
        #slider {
            width: 175px;
            height: 5px;
            margin-left: 10px;
        }
        #info-button {
            background: none;
            border: none;
            cursor: pointer;
            color: white;
            font-size: 1.5em;
            margin-left: 5px;
        }
        /* ‰ø°ÊÅØÁ™óÂè£Ê†∑Âºè */
        #info-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            width: 500px;
            text-align: center;
            animation: modalIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        @keyframes modalIn {
            from {
                opacity: 0;
                transform: translate(-50%, -45%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        #info-modal h2 {
            margin-top: 0;
        }
        #info-modal h3 {
            text-align: left;
            margin-bottom: 10px;
            color: #fff;
        }
        #info-modal .row {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }
        #info-modal .row a {
            color: #4db8ff;
            text-decoration: none;
            display: flex;
            align-items: center;
            margin: 0 10px;
        }
        #info-modal .row a:hover {
            text-decoration: underline;
        }
        #info-modal .row a img {
            width: auto; /* ‰øùÊåÅÊ≠£Â∏∏ÊØî‰æã */
            height: 20px;
            margin-right: 5px;
        }
        #info-modal .license {
            margin-top: 20px;
            font-size: 0.8em; /* Â≠ó‰ΩìÊõ¥Â∞è */
            color: #aaa;
            text-align: left;
        }
        #info-modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
        }
        #info-modal-close:hover {
            color: #f00;
        }
        #alipay-preview {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            z-index: 1000;
            width: 200px; /* ËÆæÁΩÆÂÆΩÂ∫¶Ëá≥Â∞ë‰∏∫ 200px */
            top: 100%; /* Ë∞ÉÊï¥‰ΩçÁΩÆÂà∞ÊåâÈíÆ‰∏ãÊñπ */
            left: 50%;
            transform: translateX(-50%);
        }
        #alipay-preview img {
            width: 100%; /* Á°Æ‰øùÂõæÁâáÈÄÇÂ∫îÂÆπÂô®ÂÆΩÂ∫¶ */
            border-radius: 10px;
        }
        #alipay-container:hover #alipay-preview {
            display: block; /* Á°Æ‰øùÈº†Ê†áÊÇ¨ÂÅúÊó∂ÊòæÁ§∫ */
        }
        /* #content Âç†ÊçÆÈ°∂ÈÉ®Ê†è‰∏ãÂâ©‰ΩôÂå∫ÂüüÔºåÂπ∂ÈöêËóèËá™Ë∫´ÊªöÂä® */
        #content {
            display: flex;
            height: calc(100vh - 50px);
            overflow: hidden;
        }
        /* Â∑¶‰æßÊñá‰ª∂Ê†ëÔºöÂõ∫ÂÆöÂÆΩÂ∫¶ÔºåÂπ∂Áã¨Á´ãÂûÇÁõ¥ÊªöÂä® - Ê∂≤ÊÄÅÁéªÁíÉÊïàÊûú */
        #file-tree {
            width: 200px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
            flex-shrink: 0;
        }
        #file-tree::-webkit-scrollbar {
            width: 8px;
        }
        #file-tree::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        #file-tree::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            transition: background 0.3s ease;
        }
        #file-tree::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        /* Âè≥‰æßÁîªÂªäÔºöËá™ÈÄÇÂ∫îÂÆΩÂ∫¶ÔºåÂπ∂Áã¨Á´ãÂûÇÁõ¥ÊªöÂä® */
        #gallery {
            flex-grow: 1;
            padding: 20px;
            position: relative; /* Áî®‰∫é JS ÁªùÂØπÂÆö‰ΩçÂõæÁâá */
            overflow-y: auto;
            height: 100%;
        }
        #gallery::-webkit-scrollbar {
            width: 10px;
        }
        #gallery::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        #gallery::-webkit-scrollbar-thumb {
            background: rgba(255, 165, 0, 0.3);
            border-radius: 5px;
            transition: background 0.3s ease;
        }
        #gallery::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 165, 0, 0.5);
        }
        /* canvas-containerÔºàÂä®ÁîªÂå∫ÂüüÔºâÂ¶ÇÊûúÈúÄË¶ÅÊîæÂú®ÁîªÂªä‰∏äÂ±ÇÔºå‰∏çÂΩ±ÂìçÊªöÂä®ÔºåÂª∫ËÆÆ‰øùÊåÅÁªùÂØπÂÆö‰Ωç */
        #canvas-container {
            position: absolute;
            top: 50px; /* ‰Ωç‰∫éÈ°∂ÈÉ®Ê†è‰∏ã */
            left: 222px; /* Â∑¶‰æßÔºö200px Êñá‰ª∂Ê†ë + 22px gapÔºàÂèØÊ†πÊçÆÈúÄË¶ÅË∞ÉÊï¥Ôºâ */
            width: calc(100% - 222px);
            height: calc(100% - 50px);
            z-index: 1; /* Lower z-index to ensure tooltips are above */
            pointer-events: none; /* ÈÅøÂÖçÈÅÆÊå°Âè≥‰æßÁîªÂªäÁöÑÊªöÂä®ÊàñÁÇπÂáª */
        }
        .folder {
            cursor: pointer;
            margin: 5px 0;
            padding: 5px 8px;
            font-weight: bold;
            border-radius: 6px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .folder > * {
            position: relative;
            z-index: 1;
        }
        .folder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .folder:hover::before {
            opacity: 1;
        }
        .folder:hover {
            transform: translateX(3px);
            background: linear-gradient(
                90deg,
                rgba(255, 200, 50, 0.15) 0%,
                rgba(255, 180, 30, 0.08) 100%
            );
        }
        .folder.selected {
            position: relative;
        }
        /* ÁéªÁíÉË¶ÜÁõñÂ±Ç - ‰∏ªË¶ÅÁöÑÊ∂≤ÊÄÅÁéªÁíÉÊïàÊûú */
        .folder.selected::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            background: linear-gradient(
                180deg,
                rgba(255, 200, 50, 0.35) 0%,
                rgba(255, 180, 30, 0.28) 100%
            );
            border: 1px solid rgba(255, 220, 100, 0.5);
            box-shadow: 
                /* Â§ñÂ±ÇÈªÑËâ≤ÂÖâÊôï - ÂáèÂº± */
                0 0 20px rgba(255, 200, 50, 0.25),
                0 4px 15px rgba(255, 180, 30, 0.2),
                /* Â§ñÂ±ÇÊ∑±Ëâ≤Èò¥ÂΩ± */
                0 8px 32px rgba(0, 0, 0, 0.35),
                0 2px 8px rgba(0, 0, 0, 0.2),
                /* È°∂ÈÉ®ËæπÁºòÈ´òÂÖâ - ÂáèÂº± */
                inset 0 1px 0 rgba(255, 255, 200, 0.4),
                /* Â∫ïÈÉ®ËæπÁºò‰∫ÆÂÖâ - ÂáèÂº± */
                inset 0 -1px 0 rgba(255, 240, 150, 0.35);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            pointer-events: none;
            z-index: 0;
        }
        /* Â∫ïÈÉ®È´òÂÖâÂ±Ç */
        .folder.selected::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 35%;
            background: linear-gradient(
                0deg,
                rgba(255, 240, 150, 0.3) 0%,
                rgba(255, 220, 100, 0.1) 60%,
                rgba(255, 200, 50, 0) 100%
            );
            border-radius: 0 0 20px 20px;
            pointer-events: none;
            z-index: 0;
        }
        /* ‰ªé‰∏äÂæÄ‰∏ãÊªëÂÖ• */
        .folder.selected.slide-from-top::before,
        .folder.selected.slide-from-top::after {
            animation: slideGlassFromTop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        /* ‰ªé‰∏ãÂæÄ‰∏äÊªëÂÖ• */
        .folder.selected.slide-from-bottom::before,
        .folder.selected.slide-from-bottom::after {
            animation: slideGlassFromBottom 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        @keyframes slideGlassFromTop {
            0% {
                transform: scaleY(0);
                transform-origin: top center;
                opacity: 0;
            }
            100% {
                transform: scaleY(1);
                transform-origin: top center;
                opacity: 1;
            }
        }
        @keyframes slideGlassFromBottom {
            0% {
                transform: scaleY(0);
                transform-origin: bottom center;
                opacity: 0;
            }
            100% {
                transform: scaleY(1);
                transform-origin: bottom center;
                opacity: 1;
            }
        }

        .file {
            margin-left: 20px;
            cursor: pointer;
            color: #4db8ff;
        }
        .hidden {
            display: none;
            overflow: hidden;
        }
        .thumbnail {
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 4px 6px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.1) inset,
                0 2px 4px rgba(255, 255, 255, 0.1) inset;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                        border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: absolute; /* Áî± JS Âä®ÊÄÅËÆæÁΩÆ top ‰∏é left */
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 100%);
            backdrop-filter: blur(1px);
            -webkit-backdrop-filter: blur(1px);
        }
        .thumbnail:hover {
            transform: scale(1.05);
            transform-origin: center center;
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5), 
                0 10px 30px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.3) inset,
                0 4px 8px rgba(255, 255, 255, 0.2) inset;
            border-radius: 16px;
            z-index: 10;
        }
        /* NEW Ê†áËÆ∞Ê†∑ÂºèÔºàÊñá‰ª∂Â§πÔºâ - Á∫¢Ëâ≤ËÉ∂ÂõäÂΩ¢ */
        .new-badge {
            background: #ff3b30;
            color: white;
            font-size: 0.65em;
            font-weight: bold;
            margin-left: 8px;
            padding: 3px 7px;
            border-radius: 3px;
            box-shadow: 0 2px 4px rgba(255, 59, 48, 0.3);
        }
        /* NEW ËßíÊ†áÊ†∑ÂºèÔºàÂõæÁâáÔºâ - ÊòæÁ§∫ NEW ÊñáÂ≠ó */
        .image-wrapper {
            position: absolute;
            display: inline-block;
        }
        .new-corner {
            position: absolute;
            top: 8px;
            left: 8px;
            background: #ff3b30;
            color: white;
            font-size: 0.65em;
            font-weight: bold;
            padding: 3px 7px;
            border-radius: 3px;
            z-index: 20;
            box-shadow: 0 2px 6px rgba(255, 59, 48, 0.4);
            pointer-events: none;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(20px) brightness(0.8);
            -webkit-backdrop-filter: blur(20px) brightness(0.8);
            justify-content: center;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
        }
        .modal.show {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            margin: auto;
            display: block;
            max-width: 80%;
            max-height: 80%;
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform-origin 0s, box-shadow 0.4s ease;
            animation: modalContentIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        @keyframes modalContentIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        .modal-content.enlarged {
            transform: scale(5);
            box-shadow: 0 35px 60px -15px rgba(0, 0, 0, 0.7);
        }
        .loading-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 300px;
            height: 30px;
            border-radius: 12px;
            z-index: 10001;
            box-shadow: none;
            padding: 0;
            background: none; /* ÁßªÈô§ÈªëËâ≤ÈïøÊñπÂΩ¢ËÉåÊôØ */
        }
        .progress-bar {
            width: 90%;
            height: 19px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 9.5px;
            overflow: hidden;
            margin: 0;
            position: relative;
            display: flex;
            align-items: center;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .progress-bar-inner {
            height: 19px;
            background: linear-gradient(90deg, #4db8ff 0%, #3498db 100%);
            border-radius: 9.5px;
            width: 0%;
            transition: width 0.2s;
            position: absolute;
            left: 0;
            top: 0;
            z-index: 1;
        }
        .progress-text {
            color: #fff;
            font-size: 0.98em;
            font-weight: 500;
            text-align: left;
            position: absolute;
            left: 12px;
            z-index: 2;
            background: transparent;
            pointer-events: none;
            letter-spacing: 0.02em;
            opacity: 0.95;
            line-height: 19px;
        }
        .progress-size {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #fff; /* Êîπ‰∏∫ÈªòËÆ§ÁôΩËâ≤ */
            font-size: 0.93em;
            font-weight: 400;
            pointer-events: none;
            z-index: 2;
            background: transparent;
            opacity: 0.92;
            letter-spacing: 0.01em;
            line-height: 19px;
        }
        .error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
        .sub-container {
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            margin-left: 0;
            padding-left: 2px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .hidden {
            display: none;
            overflow: hidden;
        }

        /* Êñ∞Â¢ûÔºöÁÄëÂ∏ÉÊµÅÂÜÖÈÉ®ÂÆπÂô® */
        #waterfall {
            position: relative;
            width: 100%;
        }

        .fancybox__button--close {
            display: none !important;
        }
        .fancybox__button--close svg {
            display: none !important;
        }

        .carousel__button.is-close {
            display: none !important;
        }

        /* ÊîØ‰ªòÂÆù‰∫åÁª¥Á†ÅÁ™óÂè£Ê†∑Âºè */
        #alipay-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
        }
        #alipay-modal img {
            max-width: 100%;
            border-radius: 10px;
        }
        a, #info-button, #support-button, .folder, .file {
            cursor: pointer; /* Èº†Ê†áÊÇ¨ÂÅúÊó∂ÊòæÁ§∫‰∏∫ÂèØÁÇπÂáªÁöÑÂΩ¢Áä∂ */
        }
        #support-modal h2 {
            margin-bottom: 10px; /* Slightly reduce spacing below "Support Me" */
        }
        #support-modal h3 {
            text-align: left; /* Align subtitles to the left */
            margin-left: 10px; /* Add some left margin for better alignment */
        }
        #info-button, #support-button {
            transition: transform 0.2s ease; /* Add hover animation */
        }
        #info-button:hover, #support-button:hover {
            transform: scale(1.1); /* Slightly enlarge on hover */
        }
        #support-button {
            margin-top: -5px; /* Move the Ko-fi button in the top-right corner upward */
            font-size: 1.6em; /* Slightly increase the size */
            animation: pulse-rotate 1s infinite ease-in-out; /* Add animation */
        }

        @keyframes pulse-rotate {
            0%, 100% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
        }
        #alipay-container a, #wechat-container a, .row a {
            text-decoration: none; /* Remove underline from links */
        }
        #alipay-container, #wechat-container {
            margin-right: 10px; /* Add 10px gap between Alipay and WeChat */
        }
        #wechat-container {
            margin-right: 0; /* Ensure no extra margin after WeChat */
        }
        #support-modal {
            /* ...existing code... */
            top: calc(50% - 35px); /* Move the modal 15px further upward */
        }
        #ethereum-preview, #bitcoin-preview {
            top: 100%; /* Revert floating previews to their original position below the button */
        }
        #logo-tooltip, #info-tooltip, #support-tooltip {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 5px; /* Smaller padding */
            border-radius: 5px;
            font-size: 0.6em; /* Ensure smaller font size */
            z-index: 1000;
            white-space: nowrap;
        }
        #logo:hover + #logo-tooltip,
        #info-button:hover #info-tooltip,
        #support-button:hover #support-tooltip {
            display: block;
        }
        #info-tooltip, #support-tooltip {
            top: 30px; /* Position below the buttons */
            left: 50%;
            transform: translateX(-50%);
            z-index: 102; /* Ensure tooltips are above slider container */
        }
        #support-tooltip {
            top: 35px !important; /* Move tooltip 5px further down */
            font-size: 0.5em !important; /* Ensure smaller font size with !important */
        }
        #logo-tooltip {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 5px; /* Smaller padding */
            border-radius: 5px;
            font-size: 0.6em !important; /* Explicitly set smaller font size */
            top: 27px !important; /* Move 15px up */
            left: 30px !important; /* Move 15px to the right */
            z-index: 1001; /* Ensure it is above other elements */
            white-space: nowrap;
        }
        #logo:hover + #logo-tooltip {
            display: block;
        }
        #upload-tooltip,
        #info-tooltip,
        #support-tooltip {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 5px;
            border-radius: 5px;
            font-size: 0.6em;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 102;
            white-space: nowrap;
        }

        #upload-button:hover #upload-tooltip,
        #info-button:hover #info-tooltip,
        #support-button:hover #support-tooltip {
            display: block;
        }
    </style>
    <!-- ‰øÆÊîπÔºöÊõ¥Êñ∞ Fancybox CSS ÂºïÂÖ•Âú∞ÂùÄ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css">
    <!-- ÂºïÂÖ• Font Awesome ÂõæÊ†áÂ∫ì -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GLM7S1QFLN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GLM7S1QFLN');
</script>

<body>

    <div id="topbar">
        <div id="header" style="position: relative;">
            <img id="logo" src="assets/images/logo.png" alt="Logo" style="height: 30px; vertical-align: middle; margin-right: 3px;">
            <div id="logo-tooltip" style="top: 40px; left: 10px;">MeowÔΩû</div>
            Texture Reference
        </div>
        <div id="slider-container">
            <input type="range" id="slider" min="50" max="250" value="100">
            <button id="upload-button" style="background: none; border: none; cursor: pointer; color: white; font-size: 1.3em; margin-left: 10px; position: relative; transition: transform 0.2s ease;">
                <i class="fas fa-upload"></i>
                <div id="upload-tooltip">Upload</div>
            </button>
            <button id="info-button" style="background: none; border: none; cursor: pointer; color: white; font-size: 1.5em; margin-left: 10px; position: relative;">
                <i class="fas fa-info-circle"></i>
                <div id="info-tooltip">About</div>
            </button>
            <button id="support-button" style="background: none; border: none; cursor: pointer; color: white; font-size: 1.8em; margin-left: 10px; position: relative;">
                <img src="https://storage.ko-fi.com/cdn/logomarkLogo.png" alt="Ko-fi" style="height: 23px; vertical-align: middle;">
                <div id="support-tooltip">Support</div>
            </button>
        </div>
    </div>
    <div id="content">
        <div id="file-tree"></div>
        <div id="gallery"></div>
        <div id="canvas-container">
            <canvas id="canvas"></canvas> <!-- Add canvas for animation -->
        </div>
    </div>
    <div id="error-message" class="error-message"></div>
    <div id="myModal" class="modal">
        <div class="loading-container" id="loading-container" style="display:none;">
            <div class="progress-bar">
                <div class="progress-bar-inner" id="progress-bar-inner"></div>
                <span class="progress-text" id="progress-text">Loading... 0 MB</span>
                <span class="progress-size" id="progress-size"></span>
            </div>
        </div>
        <img class="modal-content" id="img01">
    </div>
    <div id="info-modal">
        <button id="info-modal-close">‚úñ</button>
        <h2>About</h2>
        <!-- Á¨¨‰∏ÄÊ†èÔºöÁ§æ‰∫§Â™í‰Ωì -->
        <h3>About Me</h3>
        <div class="row">
            <a href="https://x.com/YeHangHarry" target="_blank">
                <img src="https://cdn-icons-png.flaticon.com/512/124/124021.png" alt="Twitter"> Twitter
            </a>
            <a href="https://www.artstation.com/ye-hang" target="_blank">
                <img src="https://cdn.brandfetch.io/artstation.com/fallback/lettermark/theme/dark/h/256/w/256/icon?c=1bfwsmEH20zzEfSNTed" alt="ArtStation"> ArtStation
            </a>
            <a href="https://www.linkedin.com/in/hang-ye?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app" target="_blank">
                <i class="fab fa-linkedin"></i> LinkedIn
            </a>
        </div>
        <!-- Á¨¨‰∫åÊ†èÔºöËØÅ‰π¶‰ø°ÊÅØ -->
        <div class="license">
            <strong>MIT License</strong><br>
            Copyright (c) 2025 Ye Hang<br><br>
            Permission is hereby granted, free of charge, to any person obtaining a copy
            of this software and associated documentation files (the "Software"), to deal
            in the Software without restriction, including without limitation the rights
            to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
            copies of the Software, and to permit persons to whom the Software is
            furnished to do so, subject to the following conditions:<br><br>
            The above copyright notice and this permission notice shall be included in all
            copies or substantial portions of the Software.<br><br>
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
            IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
            FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
            AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
            LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
            OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
            SOFTWARE.
        </div>
    </div>
    <div id="support-modal" style="display: none; position: fixed; top: calc(50% - 55px); left: 50%; transform: translate(-50%, -50%); background-color: #333; color: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 1000; width: 400px; text-align: center;">
        <button id="support-modal-close" style="position: absolute; top: 10px; right: 10px; background: none; border: none; color: white; font-size: 1.2em; cursor: pointer;">‚úñ</button>
        <h2 style="margin-top: -10px;">Support Me</h2> <!-- Move "Support Me" text slightly upward -->
        <p style="margin-top: 10px; font-size: 0.9em; color: #ccc;">
            Hope you like the site! I‚Äôve put in a lot of time, gear, and travel to make it happen. If it‚Äôs been helpful, feel free to buy me a coffee ‚òïÔ∏è ^-^
        </p>
        <h3>ÊîØ‰ªòÂÆùÂíåÂæÆ‰ø°</h3>
        <div class="row">
            <div id="alipay-container" style="position: relative; display: inline-block; margin-top: 10px;">
                <a href="javascript:void(0)" id="alipay-button">
                    <img src="https://cdn4.iconfinder.com/data/icons/logos-and-brands/512/13_Alipay_logo_logos-512.png" alt="Alipay" style="height: 20px; vertical-align: middle;"> Alipay
                </a>
                <div id="alipay-preview" style="display: none; position: absolute; background-color: rgba(0, 0, 0, 0.8); padding: 10px; border-radius: 10px; z-index: 1000; width: 200px; top: 100%; left: 50%; transform: translateX(-50%);">
                    <img src="https://i.imgur.com/vPykp9X.jpeg" alt="Alipay QR Code" style="width: 100%; border-radius: 10px;">
                </div>
            </div>
            <div id="wechat-container" style="position: relative; display: inline-block; margin-top: 10px;">
                <a href="javascript:void(0)" id="wechat-button">
                    <img src="https://i.imgur.com/rGACBF9.png" alt="WeChat" style="height: 20px; vertical-align: middle;"> WeChat
                </a>
                <div id="wechat-preview" style="display: none; position: absolute; background-color: rgba(0, 0, 0, 0.8); padding: 10px; border-radius: 10px; z-index: 1000; width: 200px; top: 100%; left: 50%; transform: translateX(-50%);">
                    <img src="https://i.imgur.com/crP3i0z.jpeg" alt="WeChat QR Code" style="width: 100%; border-radius: 10px;">
                </div>
            </div>
        </div>
        <h3 style="margin-top: 20px;">Ko-fi and PayPal</h3> <!-- Updated title -->
        <div class="row">
            <a href="https://ko-fi.com/yehang" target="_blank">
                <img src="https://storage.ko-fi.com/cdn/logomarkLogo.png" alt="Ko-fi" style="height: 20px; vertical-align: middle;"> Ko-fi
            </a>
            <a href="https://paypal.me/xiangsu?country.x=C2&locale.x=zh_XC" target="_blank" style="margin-left: 10px;">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal" style="height: 20px; vertical-align: middle;">
            </a>
        </div>
        <h3 style="margin-top: 20px;">Crypto Wallet</h3>
        <div class="row">
            <div id="ethereum-container" style="position: relative; display: inline-block; margin-top: 10px; margin-right: 10px;">
                <a href="javascript:void(0)" id="ethereum-button">
                    <img src="https://i.imgur.com/kAd6l2P.png" alt="Ethereum" style="height: 20px; vertical-align: middle;"> Ethereum
                </a>
                <div id="ethereum-preview" style="display: none; position: absolute; background-color: rgba(0, 0, 0, 0.8); padding: 10px; border-radius: 10px; z-index: 1000; width: 200px; top: 100%; left: 50%; transform: translateX(-50%);">
                    <img src="https://i.imgur.com/B9mu70B.jpeg" alt="Ethereum QR Code" style="width: 100%; border-radius: 10px;">
                    <p style="color: white; font-size: 0.8em; margin-top: 10px; word-wrap: break-word;">0xc4eDe5114900936CDED17814dE9600D1b93B768D</p>
                    <button onclick="copyToClipboard('0xc4eDe5114900936CDED17814dE9600D1b93B768D')" style="background-color: #4db8ff; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8em;">Copy</button>
                </div>
            </div>
            <div id="bitcoin-container" style="position: relative; display: inline-block; margin-top: 10px;">
                <a href="javascript:void(0)" id="bitcoin-button">
                    <img src="https://i.imgur.com/vFW3vTz.png" alt="Bitcoin" style="height: 20px; vertical-align: middle;"> Bitcoin
                </a>
                <div id="bitcoin-preview" style="display: none; position: absolute; background-color: rgba(0, 0, 0, 0.8); padding: 10px; border-radius: 10px; z-index: 1000; width: 200px; top: 100%; left: 50%; transform: translateX(-50%);">
                    <img src="https://i.imgur.com/tk6r9bB.jpeg" alt="Bitcoin QR Code" style="width: 100%; border-radius: 10px;">
                    <p style="color: white; font-size: 0.8em; margin-top: 10px; word-wrap: break-word;">1McqvC4u6Lbxip5oaZHXQBqEFshjAJj8XQ</p>
                    <button onclick="copyToClipboard('1McqvC4u6Lbxip5oaZHXQBqEFshjAJj8XQ')" style="background-color: #4db8ff; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8em;">Copy</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ÊîØ‰ªòÂÆù‰∫åÁª¥Á†ÅÁ™óÂè£ -->
    <div id="alipay-modal">
    <script>
        function showError(message) {
            const errorMessage = document.getElementById("error-message");
            errorMessage.textContent = `${message} Try using a VPN if you are in China, or use another browser.`;
            errorMessage.style.display = "block";
        }

        const jsonUrl = 'https://raw.githubusercontent.com/YeHang-GitHub/Texture-Reference-Photo/main/directory_cache.json';
        let totalSeconds = 0;
        let img = new Image();
        img.crossOrigin = "anonymous";
        let canvas, context;
        let lastSelectedFolder = null; // Ë∑üË∏™‰∏ä‰∏Ä‰∏™ÈÄâ‰∏≠ÁöÑÊñá‰ª∂Â§π

        // Ê£ÄÊü•Êñá‰ª∂ÊòØÂê¶‰∏∫ÊúÄÂêé‰∏ÄÊâπ‰∏ä‰º†ÁöÑÊñ∞Êñá‰ª∂
        function isNewFile(file) {
            return file.is_new === true;
        }

        // Ê£ÄÊü•Êñá‰ª∂Â§πÊòØÂê¶ÂåÖÂê´Êñ∞Êñá‰ª∂
        function folderHasNewFiles(folderPath, data) {
            return data.some(file => 
                file.fullsize_path.startsWith(folderPath + '/') && 
                isNewFile(file)
            );
        }

        // ÁªüËÆ°Êñá‰ª∂Â§π‰∏≠Êñ∞Êñá‰ª∂ÁöÑÊï∞Èáè
        function countNewFilesInFolder(folderPath, data) {
            return data.filter(file => 
                file.fullsize_path.startsWith(folderPath + '/') && 
                isNewFile(file)
            ).length;
        }

        async function fetchJsonData(url) {
            const timeout = new Promise((_, reject) => {
                setTimeout(() => reject(new Error("Timeout: Directory loading took too long.")), 15000); // 15 seconds timeout
            });

            try {
                const response = await Promise.race([fetch(url), timeout]);
                if (!response.ok) {
                    if (response.status === 404) {
                        showError("Error 404: Data not found. Please check the URL.");
                    } else if (response.status === 500) {
                        showError("Error 500: Server error. Please try again later.");
                    } else {
                        showError(`HTTP error! Status: ${response.status}`);
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            } catch (error) {
                console.error(error);
                if (error.message.includes("Timeout")) {
                    showError("The directory is taking too long to load. Try using a VPN if you are in China.");
                } else if (!navigator.onLine) {
                    showError("Network error: Please check your internet connection.");
                } else {
                    showError("An unexpected error occurred. Please try again later.");
                }
                throw error;
            }
        }

        async function createFileTree(container, data, level = 0, parentPath = 'Images') {
            const folders = {};

            data.forEach(file => {
                const parts = file.fullsize_path.split('/').slice(1); // Remove 'Images' from the path
                let currentLevel = folders;

                parts.forEach((part, index) => {
                    if (!currentLevel[part]) {
                        currentLevel[part] = index === parts.length - 1 ? file : {};
                    }
                    currentLevel = currentLevel[part];
                });
            });

            function buildTree(container, tree, level, currentPath) {
                const sortedKeys = Object.keys(tree).sort((a, b) => a.localeCompare(b));
                sortedKeys.forEach(key => {
                    const item = document.createElement("div");
                    item.style.marginLeft = `${level * 15}px`;
                    item.classList.add(tree[key].name ? "file" : "folder");
                    item.style.display = "flex";
                    item.style.justifyContent = "space-between";

                    const isDeepestFolder = !Object.keys(tree[key]).some(subKey => typeof tree[key][subKey] === 'object' && !tree[key][subKey].name);
                    const photoCount = tree[key].name ? 0 : countPhotosInFolder(`${currentPath}/${key}`, data);
                    const folderName = document.createElement("span");
                    folderName.textContent = tree[key].name ? "" : (isDeepestFolder ? "üèûÔ∏è " : "üìÇ ") + key;

                    // Ê£ÄÊü•Êñá‰ª∂Â§πÊòØÂê¶ÊúâÊñ∞Êñá‰ª∂
                    const newFilesCount = !tree[key].name ? countNewFilesInFolder(`${currentPath}/${key}`, data) : 0;

                    const rightSide = document.createElement("span");
                    rightSide.style.display = "flex";
                    rightSide.style.alignItems = "center";
                    rightSide.style.gap = "5px";

                    const countSpan = document.createElement("span");
                    countSpan.style.color = "#aaa";
                    countSpan.style.fontWeight = "normal"; // ËÆ©Êï∞Â≠ó‰∏çÂä†Á≤ó
                    countSpan.textContent = tree[key].name ? "" : photoCount;
                    rightSide.appendChild(countSpan);

                    if (newFilesCount > 0) {
                        const newBadge = document.createElement("span");
                        newBadge.classList.add("new-badge");
                        newBadge.textContent = `${newFilesCount} NEW`;
                        rightSide.appendChild(newBadge);
                    }

                    item.appendChild(folderName);
                    item.appendChild(rightSide);

                    if (!tree[key].name) {
                        if (isDeepestFolder) {
                            item.onclick = (event) => {
                                event.stopPropagation();
                                
                                // Á°ÆÂÆöÂä®ÁîªÊñπÂêë
                                let animationClass = 'slide-from-bottom';
                                if (lastSelectedFolder) {
                                    const lastRect = lastSelectedFolder.getBoundingClientRect();
                                    const currentRect = item.getBoundingClientRect();
                                    animationClass = currentRect.top < lastRect.top ? 'slide-from-bottom' : 'slide-from-top';
                                }
                                
                                document.querySelectorAll('.folder').forEach(folder => {
                                    folder.classList.remove('selected', 'slide-from-top', 'slide-from-bottom');
                                });
                                item.classList.add('selected', animationClass);
                                lastSelectedFolder = item;
                                
                                const newPath = `${currentPath}/${key}`;
                                displayImagesInFolder(newPath, data);
                                document.getElementById("canvas-container").style.display = "none";
                            };
                            container.appendChild(item);
                        } else {
                            const subContainer = document.createElement("div");
                            subContainer.classList.add("hidden", "sub-container");

                            item.onclick = (event) => {
                                event.stopPropagation();
                                
                                // Á°ÆÂÆöÂä®ÁîªÊñπÂêë
                                let animationClass = 'slide-from-bottom';
                                if (lastSelectedFolder) {
                                    const lastRect = lastSelectedFolder.getBoundingClientRect();
                                    const currentRect = item.getBoundingClientRect();
                                    animationClass = currentRect.top < lastRect.top ? 'slide-from-bottom' : 'slide-from-top';
                                }
                                
                                document.querySelectorAll('.folder').forEach(folder => {
                                    folder.classList.remove('selected', 'slide-from-top', 'slide-from-bottom');
                                });
                                item.classList.add('selected', animationClass);
                                lastSelectedFolder = item;
                                
                                if (window.getComputedStyle(subContainer).display === 'none') {
                                    subContainer.style.display = 'block';
                                    const height = subContainer.scrollHeight;
                                    subContainer.style.height = '0px';
                                    setTimeout(() => {
                                        subContainer.style.transition = 'height 0.3s ease';
                                        subContainer.style.height = height + 'px';
                                    }, 10);
                                    subContainer.addEventListener('transitionend', function clearHeight(e) {
                                        if (e.propertyName === 'height') {
                                            subContainer.style.height = 'auto';
                                            subContainer.style.transition = '';
                                            subContainer.removeEventListener('transitionend', clearHeight);
                                        }
                                    });
                                } else {
                                    const height = subContainer.scrollHeight;
                                    subContainer.style.height = height + 'px';
                                    setTimeout(() => {
                                        subContainer.style.transition = 'height 0.3s ease';
                                        subContainer.style.height = '0px';
                                    }, 10);
                                    subContainer.addEventListener('transitionend', function hide(e) {
                                        if (e.propertyName === 'height') {
                                            subContainer.style.display = 'none';
                                            subContainer.style.transition = '';
                                            subContainer.removeEventListener('transitionend', hide);
                                        }
                                    });
                                }
                                const newPath = `${currentPath}/${key}`;
                                displayImagesInFolder(newPath, data);
                                document.getElementById("canvas-container").style.display = "none";
                            };
                            container.appendChild(item);
                            container.appendChild(subContainer);
                            buildTree(subContainer, tree[key], level + 1, `${currentPath}/${key}`);
                        }
                    } else {
                        item.onclick = () => {
                            displayImagesInFolder(tree[key].fullsize_path, data);
                        };
                        container.appendChild(item);
                    }
                });
            }

            buildTree(container, folders, level, parentPath);
        }

        function countPhotosInFolder(folderPath, data) {
            return data.filter(file => file.fullsize_path.startsWith(folderPath + '/')).length;
        }

        function collectImagesFromFolder(folderPath, data) {
            return data
                .filter(file => file.fullsize_path.startsWith(folderPath + '/'))
                .sort((a, b) => a.name.localeCompare(b.name)); // ÊåâÊñá‰ª∂ÂêçÊéíÂ∫è
        }

        // ÁÄëÂ∏ÉÊµÅÂ∏ÉÂ±ÄÂÆûÊó∂ËÆ°ÁÆóÂáΩÊï∞
        function positionThumbnails() {
            const waterfall = document.getElementById("waterfall");
            const gap = 10; // ÂõæÁâáÈó¥Èöî
            const thumbnails = Array.from(waterfall.getElementsByClassName("thumbnail"));
            if (thumbnails.length === 0) return;
            // Áªü‰∏ÄÂÆΩÂ∫¶Ôºö‰ª•Á¨¨‰∏Ä‰∏™ÂõæÁâáÁöÑÂÆûÈôÖÂÆΩÂ∫¶‰∏∫ÂèÇÁÖß
            const colWidth = thumbnails[0].clientWidth;
            const containerWidth = waterfall.clientWidth;
            let colCount = Math.floor((containerWidth + gap) / (colWidth + gap));
            colCount = Math.max(colCount, 1);
            const colHeights = new Array(colCount).fill(0);

            thumbnails.forEach(img => {
                // ÊâæÂá∫ÂΩìÂâçÈ´òÂ∫¶ÊúÄÂ∞èÁöÑÈÇ£‰∏ÄÂàó
                let minCol = 0;
                let minHeight = colHeights[0];
                for (let i = 1; i < colCount; i++) {
                    if (colHeights[i] < minHeight) {
                        minHeight = colHeights[i];
                        minCol = i;
                    }
                }
                img.style.top = minHeight + "px";
                img.style.left = (minCol * (colWidth + gap)) + "px";
                colHeights[minCol] += img.clientHeight + gap;
            });
            // Êõ¥Êñ∞ waterfall È´òÂ∫¶‰ª•ÈÄÇÂ∫îÁÄëÂ∏ÉÊµÅÂ∏ÉÂ±Ä
            waterfall.style.height = Math.max(...colHeights) + "px";
        }

        // ‰øÆÊîπ slider ÈªòËÆ§ÂÄºÔºå‰øùËØÅÈªòËÆ§ÊØèË°åÊòæÁ§∫5Âº†ÂõæÁâá
        const slider = document.getElementById("slider");
        slider.min = 1;
        slider.max = 10;
        slider.step = 1;
        slider.value = 6; // ËÆ°ÁÆóÔºö10 - 6 + 1 = 5 Âº†/Ë°å

        function updateGalleryLayout() {
            const gap = 10; // ÂõæÁâáÈó¥Èöî
            const slider = document.getElementById("slider");
            // ÂÆûÈôÖÊØèË°åÂõæÁâáÊï∞ = (slider.max - slider.value + slider.min)
            const numImagesPerRow = parseInt(slider.max, 10) - parseInt(slider.value, 10) + parseInt(slider.min, 10);
            const waterfall = document.getElementById("waterfall");
            if (!waterfall) return; // Êñ∞Â¢ûÔºöÂ¶ÇÊûúÁÄëÂ∏ÉÊµÅÂÆπÂô®‰∏çÂ≠òÂú®ÔºåÂàôÈÄÄÂá∫
            const containerWidth = waterfall.clientWidth;
            // ËÆ°ÁÆóÊØèÂº†ÂõæÁâáÂÆΩÂ∫¶ÔºåÂèñÊï¥ÈÅøÂÖçÂ∞èÊï∞ËØØÂ∑Æ
            const newWidth = Math.floor((containerWidth - gap * (numImagesPerRow - 1)) / numImagesPerRow);
            document.querySelectorAll(".thumbnail").forEach(img => {
                img.style.width = newWidth + "px";
                img.style.height = "auto";
            });
            positionThumbnails();
            // Êõ¥Êñ∞ canvas Â∞∫ÂØ∏
            const gallery = document.getElementById("gallery");
            if (canvas) {
                canvas.width = gallery.clientWidth;
                canvas.height = gallery.clientHeight;
            }
        }

        // slider ÁöÑ oninput ‰øùÊåÅ‰∏çÂèò
        slider.oninput = () => {
            updateGalleryLayout();
        };

        // ÁõëÂê¨Á™óÂè£resize
        window.addEventListener("resize", () => {
            clearTimeout(window._resizeTimeout);
            window._resizeTimeout = setTimeout(() => {
                updateGalleryLayout();
            }, 150);
        });

        // ‰ΩøÁî® window.onload Á°Æ‰øùÈ°µÈù¢ÂÖ®ÈÉ®Âä†ËΩΩÂêéÊõ¥Êñ∞Â∏ÉÂ±Ä
        window.addEventListener("load", () => {
            updateGalleryLayout();
        });

        // Êñ∞Â¢ûÔºöÈÄöËøá XMLHttpRequest Âä†ËΩΩÂõæÁâáÔºåÂπ∂ÈÄêÊ≠•ÂõûË∞ÉËøõÂ∫¶
        function loadImageWithProgress(url, onProgress, onComplete, onError) {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", url, true);
            xhr.responseType = "blob";
            xhr.onprogress = function(e) {
                if (e.lengthComputable) {
                    const percentComplete = Math.round((e.loaded / e.total) * 100);
                    onProgress(percentComplete);
                }
            };
            xhr.onload = function() {
                if (xhr.status === 200) {
                    onComplete(xhr.response);
                } else {
                    onError(new Error("Status: " + xhr.status));
                }
            };
            xhr.onerror = function() {
                onError(new Error("XHR error"));
            };
            xhr.send();
        }

        // Êñ∞Â¢ûÔºöÂä†ËΩΩÂõæÁâáÂπ∂ÊòæÁ§∫ËøõÂ∫¶Êù°
        function loadImageWithProgress(url, expectedSize, onProgress, onComplete, onError) {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", url, true);
            xhr.responseType = "blob";
            let loadedMB = 0;
            xhr.onprogress = function(e) {
                let percent = 0;
                if (e.lengthComputable) {
                    percent = Math.round((e.loaded / e.total) * 100);
                    loadedMB = e.loaded / 1024 / 1024;
                } else if (expectedSize) {
                    percent = Math.round((e.loaded / expectedSize) * 100);
                    loadedMB = e.loaded / 1024 / 1024;
                }
                onProgress(loadedMB, e.loaded, e.total);
            };
            xhr.onload = function() {
                if (xhr.status === 200) {
                    onComplete(xhr.response);
                } else {
                    onError(new Error("Status: " + xhr.status));
                }
            };
            xhr.onerror = function() {
                onError(new Error("XHR error"));
            };
            xhr.send();
        }

        async function displayImagesInFolder(folderPath, data) {
            const gallery = document.getElementById("gallery");
            gallery.innerHTML = "";
            const waterfall = document.createElement("div");
            waterfall.id = "waterfall";
            gallery.appendChild(waterfall);
            updateGalleryLayout();
            const files = collectImagesFromFolder(folderPath, data);
            console.log("Debug: files to display", files);
            document.getElementById("slider-container").style.display = "flex";
            const gap = 10;
            const slider = document.getElementById("slider");
            const numImagesPerRow = parseInt(slider.max, 10) - parseInt(slider.value, 10) + parseInt(slider.min, 10);
            const containerWidth = waterfall.clientWidth;
            const targetWidth = Math.floor((containerWidth - gap * (numImagesPerRow - 1)) / numImagesPerRow);
            
            files.forEach(file => {
                const useRaw = file.size > 20 * 1024 * 1024;
                const fullsizeUrl = useRaw
                    ? `https://raw.githubusercontent.com/YeHang-GitHub/Texture-Reference-Photo/main/${file.fullsize_path}`
                    : `https://cdn.jsdelivr.net/gh/YeHang-GitHub/Texture-Reference-Photo@main/${file.fullsize_path}`;
                const thumbUrl = useRaw
                    ? `https://raw.githubusercontent.com/YeHang-GitHub/Texture-Reference-Photo/main/${file.thumbnail_path}`
                    : `https://cdn.jsdelivr.net/gh/YeHang-GitHub/Texture-Reference-Photo@main/${file.thumbnail_path}`;

                // ÂàõÂª∫ÂõæÁâáÂåÖË£ÖÂô®ÔºàÁî®‰∫é NEW ËßíÊ†áÔºâ
                const aEl = document.createElement("a");
                aEl.setAttribute("data-fancybox", "gallery");
                aEl.setAttribute("data-type", "image");
                aEl.setAttribute("data-src", fullsizeUrl);
                aEl.setAttribute("data-original", fullsizeUrl);
                aEl.style.position = "relative";
                aEl.style.display = "inline-block";

                const imgEl = document.createElement("img");
                imgEl.crossOrigin = "anonymous";
                imgEl.classList.add("thumbnail");
                imgEl.style.width = targetWidth + "px";
                imgEl.style.height = "auto";
                imgEl.src = thumbUrl;
                imgEl.onerror = (e) => {
                    console.error("Error loading thumbnail for", file.thumbnail_path, "URL:", imgEl.src, e);
                };
                imgEl.onload = () => {
                    positionThumbnails();
                };

                aEl.appendChild(imgEl);

                // Â¶ÇÊûúÊòØÊñ∞ÂõæÁâáÔºåÊ∑ªÂä† NEW ËßíÊ†á
                if (isNewFile(file)) {
                    const newCorner = document.createElement("span");
                    newCorner.classList.add("new-corner");
                    newCorner.textContent = "NEW";
                    aEl.appendChild(newCorner);
                }

                waterfall.appendChild(aEl);

                // Êñ∞Â¢ûÔºöÁÇπÂáªÊó∂ÊòæÁ§∫ËøõÂ∫¶Êù°Âπ∂Âä†ËΩΩÂõæÁâá
                aEl.onclick = (e) => {
                    e.preventDefault();
                    const modal = document.getElementById("myModal");
                    const modalImg = document.getElementById("img01");
                    const loadingContainer = document.getElementById("loading-container");
                    const progressBar = document.getElementById("progress-bar-inner");
                    const progressText = document.getElementById("progress-text");
                    const progressSize = document.getElementById("progress-size");
                    
                    // Êñ∞Â¢ûÔºöÊ∏ÖÁ©∫‰πãÂâçÁöÑÂõæÁâáÔºåÈÅøÂÖçÊòæÁ§∫‰∏ä‰∏ÄÊ¨°ÁöÑÂõæÁâá
                    modalImg.src = "";
                    modalImg.style.display = "none";
                    
                    loadingContainer.style.display = "flex";
                    modal.classList.add("show");
                    progressBar.style.width = "0%";
                    progressText.textContent = "Loading... 0 MB";
                    // ËÆæÁΩÆÊñá‰ª∂Â§ßÂ∞èÔºàMBÔºå‰øùÁïô‰∏§‰ΩçÂ∞èÊï∞Ôºâ
                    const mb = file.size ? (file.size / 1024 / 1024).toFixed(2) : "?";
                    progressSize.textContent = mb + " MB";
                    loadImageWithProgress(fullsizeUrl, file.size, (loadedMB, loaded, total) => {
                        progressBar.style.width = total ? ((loaded / total) * 100).toFixed(1) + "%" : "0%";
                        progressText.textContent = "Loading... " + loadedMB.toFixed(2) + " MB";
                    }, blob => {
                        const url = URL.createObjectURL(blob);
                        modalImg.src = url;
                        modalImg.style.display = "block";
                        loadingContainer.style.display = "none";
                    }, err => {
                        progressText.textContent = "Load failed";
                        progressBar.style.width = "0%";
                        console.error("Image load error", err);
                    });
                };
            });
        }

        function draw(delta) {
            totalSeconds += delta;
            const zoomFactor = 0.4; // Zoom out a little bit
            const x = -1 * (img.width * zoomFactor - canvas.width) / 2 * (1 + Math.cos(totalSeconds / (4 * Math.PI))); // Slow down by half
            const y = -1 * (img.height * zoomFactor - canvas.height) / 2 * (1 + -Math.sin(totalSeconds / (4 * Math.PI))); // Slow down by half

            context.clearRect(0, 0, canvas.width, canvas.height);
            context.drawImage(img, x, y, img.width * zoomFactor, img.height * zoomFactor); // Apply zoom factor
        }

        function animate() {
            let lastTime = 0;
            function frame(time) {
                const delta = (time - lastTime) / 1000;
                lastTime = time;
                draw(delta);
                requestAnimationFrame(frame);
            }
            requestAnimationFrame(frame);
        }

        document.addEventListener("DOMContentLoaded", async () => {
            const fileTree = document.getElementById("file-tree");
            const data = await fetchJsonData(jsonUrl);
            await createFileTree(fileTree, data);

            const modal = document.getElementById("myModal");
            const modalImg = document.getElementById("img01");

            modal.onclick = (event) => {
                if (event.target !== modalImg) {
                    modal.classList.remove("show");
                    modalImg.classList.remove("enlarged");
                }
            };

            modalImg.onclick = (event) => {
                const rect = modalImg.getBoundingClientRect();
                const offsetX = event.clientX - rect.left;
                const offsetY = event.clientY - rect.top;
                const originX = (offsetX / rect.width) * 100;
                const originY = (offsetY / rect.height) * 100;
                modalImg.style.transformOrigin = `${originX}% ${originY}%`;
                modalImg.classList.toggle("enlarged");
            };

            // ÈÖçÁΩÆsliderÂπ∂Êõ¥Êñ∞ÂàùÂßãÂ∏ÉÂ±Ä
            slider.min = 1;
            slider.max = 10;
            slider.step = 1;
            slider.value = 6; // ÈªòËÆ§ÊØèË°å5Âº†Ôºà‰∏≠ÂõæÔºâ
            updateGalleryLayout();

            // ÈÄâÂèñÈöèÊú∫ÂõæÁâáÁî®‰∫écanvasÂä®Áîª
            const randomImage = data[Math.floor(Math.random() * data.length)];
            img.src = `https://raw.githubusercontent.com/YeHang-GitHub/Texture-Reference-Photo/main/${randomImage.fullsize_path}`;

            // ËÆæÁΩÆcanvas
            canvas = document.getElementById("canvas");
            context = canvas.getContext("2d");

            img.onload = () => {
                const gallery = document.getElementById("gallery");
                canvas.width = gallery.clientWidth;
                canvas.height = gallery.clientHeight;
                animate();
            };

            document.getElementById("info-button").addEventListener("click", () => {
                document.getElementById("info-modal").style.display = "block";
            });

            document.getElementById("info-modal-close").addEventListener("click", () => {
                document.getElementById("info-modal").style.display = "none";
            });

            document.getElementById("support-button").addEventListener("click", () => {
                document.getElementById("support-modal").style.display = "block";
            });

            document.getElementById("support-modal-close").addEventListener("click", () => {
                document.getElementById("support-modal").style.display = "none";
            });

            document.getElementById("alipay-button").addEventListener("click", () => {
                document.getElementById("alipay-modal").style.display = "block";
            });

            document.getElementById("alipay-modal").addEventListener("click", () => {
                document.getElementById("alipay-modal").style.display = "none";
            });

            const alipayContainer = document.getElementById("alipay-container");
            const alipayPreview = document.getElementById("alipay-preview");

            alipayContainer.addEventListener("mouseenter", () => {
                alipayPreview.style.display = "block";
            });

            alipayContainer.addEventListener("mouseleave", () => {
                alipayPreview.style.display = "none";
            });

            const wechatContainer = document.getElementById("wechat-container");
            const wechatPreview = document.getElementById("wechat-preview");
            wechatContainer.addEventListener("mouseenter", () => {
                wechatPreview.style.display = "block";
            });
            wechatContainer.addEventListener("mouseleave", () => {
                wechatPreview.style.display = "none";
            });

            const ethereumContainer = document.getElementById("ethereum-container");
            const ethereumPreview = document.getElementById("ethereum-preview");
            ethereumContainer.addEventListener("mouseenter", () => {
                ethereumPreview.style.display = "block";
            });
            ethereumContainer.addEventListener("mouseleave", () => {
                ethereumPreview.style.display = "none";
            });

            const bitcoinContainer = document.getElementById("bitcoin-container");
            const bitcoinPreview = document.getElementById("bitcoin-preview");
            bitcoinContainer.addEventListener("mouseenter", () => {
                bitcoinPreview.style.display = "block";
            });
            bitcoinContainer.addEventListener("mouseleave", () => {
                bitcoinPreview.style.display = "none";
            });

            document.getElementById("upload-button").addEventListener("click", () => {
                window.open("https://forms.gle/p6My2uknyRNDwBDN6", "_blank");
            });

            const uploadButton = document.getElementById("upload-button");
            const uploadTooltip = document.getElementById("upload-tooltip");

            uploadButton.addEventListener("mouseenter", () => {
                uploadTooltip.style.display = "block";
                uploadButton.style.transform = "scale(1.1)";
            });

            uploadButton.addEventListener("mouseleave", () => {
                uploadTooltip.style.display = "none";
                uploadButton.style.transform = "scale(1)";
            });
        });

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Wallet address copied to clipboard!");
            }).catch(err => {
                console.error("Failed to copy text: ", err);
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
    <script>
      Fancybox.bind("[data-fancybox='gallery']", {
          Toolbar: false,  // Á¶ÅÁî®Âè≥‰∏äËßíÂ∑•ÂÖ∑Ê†è
          preload: 0,     // Á¶ÅÁî®È¢ÑÂä†ËΩΩ
      });
    </script>

</body>
</html>
